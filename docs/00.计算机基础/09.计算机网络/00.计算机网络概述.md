---
title: 计算机网络概述
date: 2022-07-26 07:02:56
permalink: /pages/62214c/
categories: 
  - 计算机网络
tags: 
  - null
author: 程序狗
---
# 图解

# [图解 | 你管这破玩意叫网络？](https://mp.weixin.qq.com/s/IdsDXsoBbnVIsCOnmbHBZQ)

**你是** **一台电脑，你的名字叫 A**

很久很久之前，你不与任何其他电脑相连接，孤苦伶仃。

![图片](assets/20210206185822-gpsqlph-20210822112132-whud8tk.png)

直到有一天，你希望与另一台电脑 B 建立通信，于是你们各开了一个网口，用一根**网线** 连接了起来。

![图片](assets/20210206185822-zdc8q3x-20210822112132-y1ifvp4.png)

用一根网线连接起来怎么就能"通信"了呢？我可以给你讲 IO、讲中断、讲缓冲区，但这不是研究网络时该关心的问题。

如果你纠结，要么去研究一下操作系统是如何处理网络 IO 的，要么去研究一下包是如何被网卡转换成电信号发送出去的，要么就仅仅把它当做电脑里有个小人在**开枪** 吧~

![图片](assets/20210206185822-f1xsprl-20210822112132-qa88e0i.gif)

反正，你们就是连起来了，并且可以通信。

第一层

有一天，一个新伙伴 C 加入了，但聪明的你们很快发现，可以每个人开**两个网口** ，用一共**三根网线** ，彼此相连。

![图片](assets/20210206185822-mf5bibz-20210822112132-qu7csg3.webp)

随着越来越多的人加入，你发现身上开的网口实在太多了，而且网线密密麻麻，混乱不堪。（而实际上一台电脑根本开不了这么多网口，所以这种连线只在理论上可行，所以连不上的我就用红色虚线表示了，就是这么严谨哈哈~）

![图片](assets/20210206185822-vl6oqrv-20210822112132-uab79on.webp)

于是你们发明了一个中间设备，你们将网线都插到这个设备上，由这个设备做转发，就可以彼此之间通信了，本质上和原来一样，只不过网口的数量和网线的数量减少了，不再那么混乱。

![图片](assets/20210206185822-4i48hsg-20210822112132-12e7zty.png)

你给它取名叫**集线器** ，它仅仅是无脑将电信号**转发到所有出口（广播）** ，不做任何处理，你觉得它是没有智商的，因此把人家定性在了**物理层** 。

![图片](assets/20210206185828-4xo0usd-20210822112132-jc0n4ne.gif)

由于转发到了所有出口，那 BCDE 四台机器怎么知道数据包是不是发给自己的呢？

首先，你要给所有的连接到集线器的设备，都起个名字。原来你们叫 ABCD，但现在需要一个更专业的，**全局唯一** 的名字作为标识，你把这个更高端的名字称为 **MAC 地址** 。

你的 MAC 地址是 aa-aa-aa-aa-aa-aa，你的伙伴 b 的 MAC 地址是 bb-bb-bb-bb-bb-bb，以此类推，不重复就好。

这样，A 在发送数据包给 B 时，只要在头部拼接一个这样结构的数据，就可以了。

![图片](assets/20210206185823-pu3xl54-20210822112132-mkezlri.png)

B 在收到数据包后，根据头部的目标 MAC 地址信息，判断这个数据包的确是发给自己的，于是便**收下** 。

其他的 CDE 收到数据包后，根据头部的目标 MAC 地址信息，判断这个数据包并不是发给自己的，于是便**丢弃** 。

![640.gif](assets/640-20220111214944-1h8ghpk.gif)

虽然集线器使整个布局干净不少，但原来我只要发给电脑 B 的消息，现在却要发给连接到集线器中的所有电脑，这样既不安全，又不节省网络资源。

第二层

如果把这个集线器弄得更智能一些，**只发给目标 MAC 地址指向的那台电脑** ，就好了。

![640 1.gif](assets/640 1-20220111215006-jctw1wr.gif)

虽然只比集线器多了这一点点区别，但看起来似乎有智能了，你把这东西叫做**交换机** 。也正因为这一点点智能，你把它放在了另一个层级，**数据链路层** 。

![图片](assets/20210206185823-73jy3uo-20210822112132-u8ikytj.png)

如上图所示，你是这样设计的。

交换机内部维护一张 **MAC 地址表** ，记录着每一个 MAC 地址的设备，连接在其哪一个端口上。

| MAC 地址          | 端口   |
| ------------------- | -------- |
| bb-bb-bb-bb-bb-bb | 1      |
| cc-cc-cc-cc-cc-cc | 3<br/> |
| aa-aa-aa-aa-aa-aa | 4<br/> |
| dd-dd-dd-dd-dd-dd | 5<br/> |

假如你仍然要发给 B 一个数据包，构造了如下的数据结构从网口出去。

![图片](assets/20210206185823-qb5thz1-20210822112132-xy00fo5.png)