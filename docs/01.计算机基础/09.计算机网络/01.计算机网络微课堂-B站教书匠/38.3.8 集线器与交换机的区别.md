---
title: 3.8 集线器与交换机的区别
date: 2023-11-16 15:49:52
permalink: /Network/data-link-layer/3.8
categories:
  - 计算机基础
  - 计算机网络
  - 计算机网络微课堂-B站教书匠
tags:
  - 
---


## 3.8 集线器与交换机的区别

　　本节课我们介绍集线器与交换机的区别，​我们首先来看早期的总线型以太网，这是我们之前课程中经常用来举例的总线型以太网，​他最初使用粗铜轴电缆作为传输媒体，后来演进到使用价格相对便宜的细同轴电缆。
<!-- more -->

　　当初认为​这种连接方法既简单又可靠，因为在那个时代普遍认为有源器件不可靠​而无缘的电缆线才是最可靠的。然而​这种使用无源、电缆和大量机械接头的总线型以太网，并不像人们想象的那么可靠。

　　![](https://image.peterjxl.com/blog/image-20211214194237-f1vvcv5.png)

　　‍

---

　　‍

　　后来​以太网发展出来了一种使用大规模集成电路，可靠性非常高的设备，叫做集线器，​并且使用更便宜更灵活的双绞线。​作为传输媒体如图所示，这是一个使用集线器​和双脚线电缆，互联了4台主机的新型拓扑的以太网。主机中的以太网卡，以及极限器各接口，​使用RJ-45插座，它们之间通过双绞线电缆进行连接，在双脚线电缆的两端是RJ-45插头，​也就是我们俗称的水晶头。

　　实践证明，使用双绞线和集线器​比使用具有大量机械接头的无源电缆，要可靠的多，并且价格便宜，使用方便。因此​粗缆和细缆以太网早已成为了历史，从市场上消失了

　　![](https://image.peterjxl.com/blog/image-20211214194340-cyvw3ul.png)

　　‍

　　‍

---

　　使用集线器的以太网，虽然物理拓扑是星型的，但在逻辑上仍然是一个总线网，各站​共享逻辑上的总线资源，使用的还是csma/cd协议，集线器只工作在物理层，​它的每个接口仅简单的转发比特，不进行碰撞检测，碰撞检测的任务由各站的网卡负责。​

　　在分析问题时，我们可将集线器简单看作是一条总线，集线器一般都有少量的容错能力​和网络管理功能。例如若网络中某个网卡出现了故障，不停的发送帧，​此时集线器也可以检测到这个问题，在内部断开与出故障网卡的连线，​使整个以太网仍然能正常工作。

　　使用集线器可以对以太网进行扩展。​由于集线器只工作在物理层，所以更具体的说法是使用集线器在物理层扩展以太网。​我们来举例说明，假设某学院下设三个系部，​每个系部都有一个使用集线器作为互联设备的以太网，​这三个以太网相互独立，各自共享自己的总线资源，是三个独立的碰撞域或称冲突域。

　　![](https://image.peterjxl.com/blog/image-20211214194633-xy9dnmq.png)

　　‍

　　​例如一系中的某台主机给另一台主机发送数据帧，由于总线特性，表示该数据帧的信号​会传输到一系中的其他各主机，

　　二系中的多台主机同时发送数据帧，​由于总线特性，​这必然会产生信号碰撞，碰撞后的信号会传输到二系中的各主机。

　　为了使各系部的以太网​能够相互通信，​可再使用一个集线器，将它们互联起来。这样原来三个独立的以太网​就要互联成为了一个更大的以太网，而原来三个独立的碰撞域就要合并成了一个更大的碰撞域。​换句话说，形成了一个更大的总线型以太网。比如一系中的某台主机，​给二系中的某台主机发送数据帧，由于总线特性，表示该数据帧的信号​会传输到整个网络中的其他各主机，

　　![](https://image.peterjxl.com/blog/image-20211214194831-qz5wf9h.png)

　　‍

---

　　‍

　　在集线器之后​发展出了更先进的网络互联设备，也就是以太网交换机。我们先从一个典型的例子​来看看以太网交换机与集线器的区别，

* 使用集线器互联而成的，共享总线式以太网上的某个主机，​要给另一个主机发送单播帧，该单播帧会通过共享总线传输到总线上的其他各个主机
* 使用交换机互联而成的交换式以太网上的某个主机，要给另一个主机发送播帧针，​该单波帧进入交换机后，交换机会将该单波帧转发给目的主机，而不是网络中的其他各个主机。![](https://image.peterjxl.com/blog/image-20211214194921-dd9v9ro.png)​

　　​很显然交换机具有明显的优势，​需要说明的是为了简单起见，本节课所有举例的前提条件是忽略ARP过程，​并假设交换机的帧交换表已经学习或配置好了，以太网交换机通常都有多个接口，​每个接口都可以通过双绞线电缆与一台主机或另一个以太网交换机相连，​一般都工作在全双工方式，也就是发送帧和接收帧，可以同时进行。注意​使用集线器的以太网在逻辑上是共享总线的，需要使用csma/cd协议​来协调各主机征用总线，只能工作在半双工模式，也就是收发帧不能同时进行。​以太网交换机具有并行性能，同时连通多对接口，使多对主机能同时通信而无碰撞。​

　　以太网交换机的接口一般都支持多种速率，例如10兆比特每秒，100兆比特每秒，​一G比特每秒，10G比特每秒等。​以太网交换机工作在数据链入层，当然也包括物理层，他收到帧后，在帧交换表中​查找帧的目的MAC地址所对应的接口号，然后通过该接口转发帧

　　![](https://image.peterjxl.com/blog/image-20211214200618-zk29if9.png)

　　‍

　　‍

　　‍

　　‍

　　‍

　　​假设这是该交换机的帧交换表，主机a给主机b发送数据帧，交换机收到该帧后，​在帧交换表中查找该帧的目的MAC地址，也就是主机b的Mark地址，发现应该从接口二转发，​于是就从接口二将该帧转发出去。​

　　![](https://image.peterjxl.com/blog/image-20211214200658-tewo7ag.png)

　　‍

　　‍

　　‍

　　以太网交换机是一种即插即用的设备，上电即可工作。​其内部的帧交换表​是通过自学习算法自动的逐渐建立起来的。许多以太网交换机对收到的帧​采用存储转发方式进行转发，但也有一些交换机采用直通交换方式，​直通交换不必把整个帧先缓存后再进行处理，而是在接收帧的同时，​就立即按帧的目的MAC地址决定该帧的转发接口，因而提高了帧的转发速率。一般采用​基于硬件的交叉矩阵，这样交换时延就非常小，但直通交换的一个缺点，​他不检查帧是否有差错，就直接将帧转发出去。​

---

　　‍

　　接下来我们再通过举个例子，​进一步对比集线器和交换机，这是前提条件。我们首先来对比主机发送单播帧的情况，​对于使用集线器的共享总线型以太网，单播帧会传播到总线上的其他各主机，​各主机中的网卡，根据帧的目的MAC地址决定是否接受该帧。​

　　对于使用交换机的交换式以太网，交换机收到单播帧之后，根据帧的目的MAC地址​和自身的帧交换表，将帧转发给目的主机，而不是网络中的其他各主机。​

　　‍

　　我们再来对比发送广播帧的情况，

* 对于使用集线器的共享总线型以太网，​广播帧会传播到总线上的其他各主机，各主机中的网卡，检测到帧的目的MAC地址是广播地址，​就接受该帧
* 对于使用交换机的交换式以太网。交换机收到广播帧之后，​检测到帧的目的MAC地址是广播地址，于是从除该帧进入交换机接口外的其他各接口，​转发该帧，网络中除源主机外的其他各主机收到广播帧后接受该广播帧。​
* 从本例可以看出，使用集线器的共享总线型以太网中的各主机属于同一个广播域，​而使用交换机的交换式以太网中的各主机也属于同一个广播域。​因此对于广播帧的情况，​从效果上看没有什么区别。

　　‍

　　‍

　　我们再来对比网络中的多台主机，​同时给另一台主机发送单播帧的情况，

* 对于使用集线器的共享总线型以太网，​这必然会产生碰撞，​遭遇碰撞的帧会传播到总线上的各主机，
* 对于使用交换机的交换式以太网，​交换机收到多个帧时会将它们缓存起来，然后逐个转发给目的主机，不会产生碰撞。​

　　‍

　　‍

　　接下来我们来对比使用集线器，扩展以太网和  使用交换机扩展以太网有什么区别：

* 首先对比发送单播帧的情况，这是仅使用集线器扩展以太网后发送单波帧的情况，​
* 这是仅使用交换机扩展以太网后发送单播帧的情况，​很显然交换机具有非常明显的优势，
* 再来对比发送广播帧的情况，​这是仅使用集线器扩展以太网后发送广播帧的情况，这是仅使用交换机扩展以太网后​发送广播帧的情况，从效果上看是一样的。​
* 可见不管是用集线器​还是交换机来扩展以太网，扩展后的以太网中的各主机都属于同一个广播域，​仅使用集线器扩展的以太网，在逻辑上仍然是共享总线的，并且形成为一个更大的碰撞域。​换句话说，参与竞争总线的主机比扩展前的更多了，这是竞争总线​并产生碰撞的一个例子。
* 同样的传输任务，在仅使用交换机扩展的以太网上就不会产生碰撞。​
* 因此如果仅仅使用集线器来扩展以太网，不仅会扩大广播域，​还同时扩大了碰撞域，但是如果使用交换机将原来各自独立的碰撞域连接起来，​只会扩大广播域，而不会扩大碰撞域，​也就是说交换机可以隔离碰撞域，

　　‍

　　我们将集线器和交换机的区别小结如下，需要说明的是工作在数据链路层的以太网交换机，​其性能远远超过工作在物理层的集线器，而且价格并不贵，这就使得集线器逐渐被市场淘汰。目前很难在市场上再见到集线器了。​​

　　![](https://image.peterjxl.com/blog/image-20211214201155-0fnlv6f.png)

　　‍