---
title: 进程和线程的基本概念
date: 2024-01-26 17:13:58
permalink: /JavaSenior/Thread/basic/
categories:
  - Java
  - JavaSenior
  - 线程
tags:
  - 
---
# 10.进程和线程的基本概念

　　我们在之前，学习的程序在没有跳转语句的前提下，都是由上至下依次执行，那现在想要设计一个程序，边打游戏边听歌，怎么设计？

　　要解决上述问题，咱们得使用多进程或者多线程来解决。

> 之前学集合的时候，就说过了，只要是不安全的操作，就是多线程。多线程会比较快。
<!-- more -->
　　‍

　　在研究多线程之前，我们先来讲讲什么是并发和并行

## 并发与并行

* **并发**：指两个或多个事件在**同一个时间段内**发生。
* **并行**：指两个或多个事件在**同一时刻**发生（同时发生）。

　　‍

　　‍

　　在操作系统中，安装了多个程序，并发指的是在一段时间内宏观上有多个程序同时运行，这在单 CPU 系统中，每一时刻只能有一道程序执行，即微观上这些程序是分时的交替运行，只不过是给人的感觉是同时运行，那是因为分时交替运行的时间是非常短的。就好比一个人吃两个馒头，只能这个吃一口，那个吃一口：

　　​![](https://image.peterjxl.com/blog/image-20240124100440-1wb4csi.png)​

　　‍

　　‍

　　而在多个 CPU 系统中，则这些可以并发执行的程序便可以分配到多个处理器上（CPU），实现多任务并行执行，即利用每个处理器来处理一个可以并发执行的程序，这样多个程序便可以同时执行。

　　目前电脑市场上说的多核 CPU，便是多核处理器，核越多，并行处理的程序越多，能大大的提高电脑运行的效率：

　　​![](https://image.peterjxl.com/blog/image-20240124100552-gusco8b.png)​

　　‍

　　‍

## 进程与线程

* **进程**：是指一个内存中运行的应用程序，每个进程都有一个独立的内存空间，一个应用程序可以同时运行多个进程；进程也是程序的一次执行过程，是系统运行程序的基本单位；系统运行一个程序即是一个进程从创建、运行到消亡的过程。
* **线程**：线程是进程中的一个执行单元，负责当前进程中程序的执行，一个进程中至少有一个线程。一个进程中是可以有多个线程的，这个应用程序也可以称之为多线程程序。

　　‍

### 进程

　　**简而言之：一个程序运行后至少有一个进程，一个进程中可以包含多个线程。**

　　以 Windows 为例，我们可以在电脑底部任务栏，右键----->打开任务管理器（Task Manager），可以查看当前操作系统中运行的进程：

　　​![](https://image.peterjxl.com/blog/image-20240124101342-s75tejq.png)​

　　‍

　　以Linux为例，可以通过 `top`​ 命令来查看进程及其状态，其中 `top`​ 也是一个进程：

　　​![](https://image.peterjxl.com/blog/image-20240124101250-bouzoa3.png)​

　　‍

　　‍

　　‍

　　我们平时使用程序之前，都是需要先安装的，安装完后程序会在硬盘上（永久存储）。当我们启动程序的时候（例如双击启动），那么该程序就会被加载到内存中，此时内存中的程序就可以称为进程：

　　​![](https://image.peterjxl.com/blog/image-20240124101553-c8pkpzd.png)​

　　‍

　　当我们关闭程序（或者从任务管理器中结束进程）的时候，内存中的程序就会被清除：

　　​![](https://image.peterjxl.com/blog/image-20240124102005-mxtzf2x.png)​

　　‍

### 线程

　　**线程**：线程是进程中的一个执行单元，负责当前进程中程序的执行，一个进程中至少有一个线程。一个进程中是可以有多个线程的，这个应用程序也可以称之为多线程程序。

　　举个例子：比如一款安全的程序，包含病毒查杀，保护等功能，就可以同时开启两个线程，分别执行。

　　举例子：同时执行腾讯电脑管家的3个功能，那么每个功能都会开启一个线程。

　　如果CPU支持多核多线程，执行效率还能更高。

　　​![](https://image.peterjxl.com/blog/image-20240124112725-lmonlfa.png)​

　　‍

　　‍

### 线程调度

* 分时调度：所有线程轮流使用 CPU 的使用权，平均分配每个线程占用 CPU 的时间。
* 抢占式调度：优先让优先级高的线程使用 CPU，如果线程的优先级相同，那么会随机选择一个（线程随机性原理）。Java 使用的是抢占式调度。

　　‍

　　例如，Windows 中可以设置线程的优先级：

　　​![](https://image.peterjxl.com/blog/image-20240124113130-jwbv3aj.png)​

　　‍

　　‍

　　‍

　　现在的操作系统几乎都支持同时运行多个程序。比如：现在我们上课一边使用编辑器，一边使用录屏软件，同时还开着画图板，dos窗口等软件。此时，这些程序是在同时运行，感觉这些软件好像在同一时刻运行着。

　　实际上，CPU 使用抢占式调度模式在多个线程间进行着高速的切换。对于CPU的一个核而言，某个时刻，只能执行一个线程，而 CPU的在多个线程间切换速度相对我们的感觉要快，看上去就是在同一时刻运行。

　　其实，多线程程序并不能提高程序的运行速度，但能够提高程序运行效率，让CPU的使用率更高。

　　​![](https://image.peterjxl.com/blog/image-20240124113325-h2nvbyz.png)​

　　‍

　　‍

　　注意：单核处理器的计算机肯定是不能并行的处理多个任务的，只能是多个任务在单个CPU上并发运行。同理，线程也是一样的，从宏观角度上理解线程是并行运行的，但是从微观角度上分析却是串行运行的，即一个线程一个线程的去运行，当系统只有一个CPU时，线程会以某种顺序执行多个线程，我们把这种情况称之为线程调度。
