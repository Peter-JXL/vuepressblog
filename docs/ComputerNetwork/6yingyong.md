# 应用层


## 6.1 应用层概述

从本节课开始，我们进入第6章应用层的学习。本节课我们对应用层进行概述，在之前的课程中，我们按计算机网络体系结构，由低到高的顺序，依次学习了物理层、数据链路层、网络层、运输层。

物理层解决使用何种信号来传输比特的问题。
数据链路层解决分组在一个网络或一段链路上传输的问题。
网络层解决分组在多个网络上传输和路由的问题。
运输层解决进程之间基于网络的通信问题，
而计算机网络体系结构中的应用层享受旗下各层提供的服务，解决通过应用进程的交互来实现特定网络应用的问题。

应用层是计算机网络体系结构的最顶层，其功能是设计和建立计算机网络的最终目的，也是在计算机网络中发展最快的部分。从早期基于文本的应用，例如电子邮件、远程登录，文件传输，新闻组等到20世纪90年代，将因特网带入千家万户的万维网，再到当今流行的即时通信，p 2p文件共享， 以及各种音视频应用，网络应用一直层出不穷。

此外，计算设备的小型化和无处不在，宽带住宅接入和无线接入的日益普及和迅速发展，为未来更多的新型网络应用提供了广阔的舞台。在本章中，我们将以一些经典的网络应用为例，来学习有关网络应用的原理，协议和实现方面的知识。例如我们在浏览器的地址栏中输入某个网站的域名号，就可以访问该网站的内容，这就是推动因特网飞速发展的万维网应用。其相关的应用层协议为超文本传送协议HTTP。用户在浏览器地址栏中输入的是建明之一的域名，而TCP/IP体系的网际层是用IP地址来标识目的主机，从域名到IP地址的转换工作，有属于应用层范畴的域名系统DNS在后台帮用户自动完成，以方便用户的使用。除了万维网应用和域名系统外，常见的应用还有动态主机配置DHCP，电子邮件，文件传送和p2p文件共享，多媒体网络应用等。我们将在本章的后续课程中分别介绍这些网络应用的相关协议和基本工作原理。


![image.png](assets/image-20211219165955-zn30b6r.png)



本节课的内容小结如下，

![image.png](assets/image-20211219170149-jlthfkc.png)

## 6.2 客户—服务器方式和对等方式



本节课我们介绍客户服务器方式和对等方式。我们知道网络应用程序运行在处于网络边缘的不同端系统上，通过彼此间的通信来共同完成某项任务。因此开发一种新的网络应用，首先要考虑的问题就是网络应用程序，在各种端系统上的组织方式和他们之间的关系。

目前流行的主要有以下两种，一种是客户服务器方式，也称为CS方式，另一种是对等方式，也称为P2P方式。

我们首先来看客户服务器方式，客户和服务器是指通信中所涉及的两个应用进程，客户服务器方式所描述的是进程之间服务和被服务的关系。

我们来举例说明，如图所示处于网络边缘的主机a中运行的是客户程序，正在运行的客户程序，称为客户进程，也可简称为客户。需要注意的是运行客户进程的主机应称为客户计算机，但有时也简称为客户。处于网络边缘的主机b中，运行的是服务器程序，正在运行的服务器程序称为服务器进程，也可简称为服务器。

需要注意的是运行服务器进程的主机应称为服务器计算机，但有时也简称为服务器。
在客户服务器方式下，客户向服务器请求服务，服务器收到服务请求后，向客户提供服务也就是说，客户是服务的请求方，服务器是服务的提供方，服务器总是处于运行状态，并等待客户的服务请求。
服务器具有固定的运输层、端口号，例如HTTP服务器的默认端口号为80，而运行服务器的主机也具有固定的IP地址，

CS方式是因特网上传统的，同时也是最成熟的方式。很多我们熟悉的网络应用采用的都是CS方式，包括万维网、电子邮件、文件传输等。基于CS方式的应用服务，通常是服务集中型的，即应用服务，集中在网络中比客户计算机少得多的服务器计算机上。由于一台服务器计算机要为多个客户机提供服务，在CS应用中常会出现服务器计算机跟不上众多客户机请求的情况。为此，在CS应用中常用计算机群集或服务器场来构建一个强大的虚拟服务器。

我们再来看对等方式，也就是P2P方式，在P2P方式中没有固定的服务请求者和服务提供者，分布在网络边缘，各端系统中的应用进程是对等的，被称为对等方，对等方相互之间直接通信，每个对等方既是服务的请求者，又是服务的提供者。
我们来举例说明，如图所示处于网络边缘的主机cdef中运行着同一种P2P程序，例如某种网络下载工具软件，e和f中的P2P进程互为对等方，c和d中的P2P进程互为对等方，而e中的P2P进程还和d中的P2P进程互为对等方。我们可以想象成e的P2P进程正在从f下载文件，与此同时还为d的P2P进程提供下载服务。
目前在因特网上流行的P2P应用，主要包括P2P文件共享，即时通信、P2P流媒体、分布式存储等。基于P2P的应用是服务分散型的，因为服务不是集中在少数几个服务器计算机中，而是分散在大量对等计算机中。这些计算机并不为服务提供商所有，而是为个人控制的桌面计算机和笔记本电脑。它们通常位于住宅校园和办公室中。P2P方式的最突出特性之一，就是它的可扩展性，因为系统每增加一个对等方，不仅增加的是服务的请求者，同时也增加了服务的提供者。系统性能不会因为规模的增大而降低，P2P方式具有成本上的优势，因为它通常不需要庞大的服务器设施和服务器带宽，为了降低成本，服务提供商对于将P2P方式用于应用的兴趣越来越大，

本节课的内容小结如下



## 6.3 动态主机配置协议DHCP

同学们好，欢迎大家来到我的计算机网络微课堂，本节课我们介绍动态主机配置协议DHCP。

我们首先来举例说明DHCP的作用。如图所示有这样一个网络拓扑，请同学们思考一下，我们应该给网络中的各主机设置怎样的网络相关配置信息，才能使他们可以正常访问网络中的WEB服务器。根据我们之前课程所介绍过的相关知识可知，需要给网络中的各主机正确配置IP地址，子网掩码，默认网关，DNS服务器的网络相关配置信息。

例如这是我们给该主机手工配置的网络相关配置信息，这是我们给另一台主机手工配置的网络相关配置信息。试想一下，如果网络中的主机数量比较多，则这种手工配置的工作量就比较大，并且容易出错。


![image.png](assets/image-20211219170857-agbg7fb.png)





如果我们给网络中添加一台DHCP服务器，在该服务器中设置好，可谓网络中其他各主机配置的网络配置信息。网络中各主机开机后自动启动DHCP程序，向DHCP服务器请求自己的网络配置信息，这样网络中的各主机就都可以从DHCP服务器自动获取网络配置信息，而不用手工参与。

![image.png](assets/image-20211219170932-kb79yjm.png)